webpackJsonp([1],{119:function(e,t,n){"use strict";function r(e){var t=e();return c('create event "%s" in session %s',t.name,t.session_id),function(e){e(f(t))}}function o(e){return c("end events for session %s",e),function(t){t(f(new a.e({session_id:e})))}}function i(e){return c("delete event %s",e),function(t){t(p(e))}}var u=n(13),a=n(14);t.a=r,t.c=o,t.b=i;var c=u.a.bind()("actions:events"),s=Symbol("create event");Object.defineProperty(t,"d",{configurable:!1,enumerable:!0,get:function(){return s}});var l=Symbol("delete event");Object.defineProperty(t,"e",{configurable:!1,enumerable:!0,get:function(){return l}});var f=function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];return{type:s,payload:e}},p=function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];return{type:l,payload:e}}},120:function(e,t,n){"use strict";function r(e){return a('create template "%s"',e),function(t){t(l(new u.b({custom_type:e})))}}function o(e){return a("delete template %s",e),function(t){t(f(e))}}var i=n(13),u=n(14);t.a=r,t.b=o;var a=i.a.bind()("actions:templates"),c=Symbol("create template");Object.defineProperty(t,"c",{configurable:!1,enumerable:!0,get:function(){return c}});var s=Symbol("delete template");Object.defineProperty(t,"d",{configurable:!1,enumerable:!0,get:function(){return s}});var l=function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];return{type:c,payload:e}},f=function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];return{type:s,payload:e}}},13:function(e,t,n){"use strict";function r(e){return window&&(window.DEBUG=i.a),i.a.bind()("tapclock:"+e)}var o=n(113),i=o&&o.__esModule?function(){return o["default"]}:function(){return o};Object.defineProperty(i,"a",{get:i}),t.a=r},14:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;n>o;o++)r[o-2]=arguments[o];var i=!0,u=!1,a=void 0;try{for(var c,s=r[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var l=c.value;if(!t[l])throw new q(e,l)}}catch(f){u=!0,a=f}finally{try{!i&&s["return"]&&s["return"]()}finally{if(u)throw a}}return t}function c(e){var t=I.find(function(t){return t.isType(e)});if(!t)throw new x(e);return t}function s(e){var t=c(e);return t.fromIterable(e)}var l=n(74),f=l&&l.__esModule?function(){return l["default"]}:function(){return l};Object.defineProperty(f,"a",{get:f});var p=n(0),d=p&&p.__esModule?function(){return p["default"]}:function(){return p};Object.defineProperty(d,"a",{get:d});var y=n(8),b=y&&y.__esModule?function(){return y["default"]}:function(){return y};Object.defineProperty(b,"a",{get:b});var v=n(13);t.h=s;var h,m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),O=(v.a.bind()("model"),function(e){function t(){return o(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),_(t,null,[{key:"isType",value:function(e){return 3===e.count()&&"SessionRecord"===e.get("_class")&&e.has("_id")&&e.has("name")}},{key:"fromIterable",value:function(e){return new t(e.toJS())}}]),t}(y.Record.bind()({_class:"SessionRecord",_id:null,name:null})));Object.defineProperty(t,"a",{configurable:!1,enumerable:!0,get:function(){return O}});var g="CUSTOM_EVENT",E="NULL_EVENT",P="NOW_EVENT",j="END_EVENT",w=function(e){function t(e){return o(this,t),i(this,Object.getPrototypeOf(t).call(this,m({_id:f.a.v4(),time:d.a.bind()()},e)))}return u(t,e),_(t,null,[{key:"isType",value:function(e){return 9===e.count()&&"EventRecord"===e.get("_class")&&e.has("_id")&&e.has("session_id")&&e.has("type")&&e.has("custom_type")&&e.has("name")&&e.has("time")&&e.has("isNow")&&e.has("isEnd")}},{key:"getClass",value:function(e){var t=R.get(e);if(!t)throw new N(e);return t}},{key:"fromIterable",value:function(e){var n=t.getClass(e.get("type"));return new n(e.map(function(e,t){return"time"===t?d.a.bind()(e):e}).toJS())}}]),t}(y.Record.bind()({_class:"EventRecord",_id:null,session_id:null,type:null,custom_type:null,name:null,time:null,isNow:!1,isEnd:!1}));Object.defineProperty(t,"c",{configurable:!1,enumerable:!0,get:function(){return w}});var T=function(e){function t(e){return o(this,t),i(this,Object.getPrototypeOf(t).call(this,m({},a("CustomEvent",e,"session_id","custom_type","name"),{type:g})))}return u(t,e),t}(w),k=function(e){function t(){return o(this,t),i(this,Object.getPrototypeOf(t).call(this,{type:E}))}return u(t,e),t}(w);Object.defineProperty(t,"f",{configurable:!1,enumerable:!0,get:function(){return k}});var M=function(e){function t(){return o(this,t),i(this,Object.getPrototypeOf(t).call(this,{type:P,time:d.a.bind()(),isNow:!0}))}return u(t,e),t}(w);Object.defineProperty(t,"d",{configurable:!1,enumerable:!0,get:function(){return M}});var S=function(e){function t(e){return o(this,t),i(this,Object.getPrototypeOf(t).call(this,m({time:d.a.bind()()},a("EndEvent",e,"session_id"),{_id:e.session_id,type:j,name:"end",isEnd:!0})))}return u(t,e),t}(w);Object.defineProperty(t,"e",{configurable:!1,enumerable:!0,get:function(){return S}});var R=y.fromJS.bind()((h={},r(h,g,T),r(h,E,k),r(h,P,M),r(h,j,S),h)),C=function(e){function t(e){return o(this,t),i(this,Object.getPrototypeOf(t).call(this,m({_id:e.custom_type,name:e.custom_type},a("Template",e,"custom_type"))))}return u(t,e),_(t,null,[{key:"isType",value:function(e){return 4===e.count()&&"Template"===e.get("_class")&&e.has("_id")&&e.has("custom_type")&&e.has("name")}},{key:"fromIterable",value:function(e){return new t(e.toJS())}}]),t}(y.Record.bind()({_class:"Template",_id:null,name:null,custom_type:null,eventCreator:function(e){var t=this;return function(){return new T({session_id:e,name:t.name,custom_type:t.custom_type})}}}));Object.defineProperty(t,"b",{configurable:!1,enumerable:!0,get:function(){return C}});var q=function(e){function t(e,n){return o(this,t),i(this,Object.getPrototypeOf(t).call(this,"Missing attributes for record "+e+": "+n))}return u(t,e),t}(Error),N=function(e){function t(e){return o(this,t),i(this,Object.getPrototypeOf(t).call(this,"No such event type: "+JSON.stringify(e)))}return u(t,e),t}(Error),x=function(e){function t(e){return o(this,t),i(this,Object.getPrototypeOf(t).call(this,"No matching type for "+JSON.stringify(e.toJSON())))}return u(t,e),t}(Error),I=y.List.of(O,w,C),D=y.Map.of("work",new C({custom_type:"work"}),"break",new C({custom_type:"break"}));Object.defineProperty(t,"g",{configurable:!1,enumerable:!0,get:function(){return D}})},25:function(e,t,n){"use strict";var r=n(321),o=n(322),i=n(320);Object.prototype.hasOwnProperty.call(r,"a")&&Object.defineProperty(t,"a",{configurable:!1,enumerable:!0,get:function(){return r.a}}),Object.prototype.hasOwnProperty.call(o,"a")&&Object.defineProperty(t,"b",{configurable:!1,enumerable:!0,get:function(){return o.a}}),Object.prototype.hasOwnProperty.call(i,"a")&&Object.defineProperty(t,"c",{configurable:!1,enumerable:!0,get:function(){return i.a}})},313:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=n(1),a=u&&u.__esModule?function(){return u["default"]}:function(){return u};Object.defineProperty(a,"a",{get:a});var c=n(42),s=c&&c.__esModule?function(){return c["default"]}:function(){return c};Object.defineProperty(s,"a",{get:s});var l=n(43),f=l&&l.__esModule?function(){return l["default"]}:function(){return l};Object.defineProperty(f,"a",{get:f});var p=n(315),d=n(325),y=n(323),b=n(324),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e){function t(e){r(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.history=l.hashHistory,n}return i(t,e),v(t,[{key:"render",value:function(){return a.a.createElement(c.Provider,{store:this.props.store},a.a.createElement(l.Router,{history:this.history},a.a.createElement(l.Route,{path:"/",component:p.a},a.a.createElement(l.IndexRoute,{component:d.a}),a.a.createElement(l.Route,{path:"preferences",component:y.a}),a.a.createElement(l.Route,{path:"session/:id",component:b.a}))))}}]),t}(u.Component);h.propTypes={store:u.PropTypes.object.isRequired},t.a=h},314:function(e,t,n){"use strict";function r(e){return P(_.a,e)}function o(){return i(localStorage.getItem("tapclock.online"))}function i(e){return g("Parse state %o",e),p.fromJS.bind()(JSON.parse(e),function(e,t){try{return O.h.bind()(t)}catch(n){return p.Iterable.isIndexed(t)?t.toList():t.toMap()}})}var u=n(118),a=u&&u.__esModule?function(){return u["default"]}:function(){return u};Object.defineProperty(a,"a",{get:a});var c=n(116),s=c&&c.__esModule?function(){return c["default"]}:function(){return c};Object.defineProperty(s,"a",{get:s});var l=n(115),f=l&&l.__esModule?function(){return l["default"]}:function(){return l};Object.defineProperty(f,"a",{get:f});var p=n(8),d=p&&p.__esModule?function(){return p["default"]}:function(){return p};Object.defineProperty(d,"a",{get:d});var y=n(73),b=y&&y.__esModule?function(){return y["default"]}:function(){return y};Object.defineProperty(b,"a",{get:b});var v=n(117),h=v&&v.__esModule?function(){return v["default"]}:function(){return v};Object.defineProperty(h,"a",{get:h});var m=n(13),_=n(328),O=n(14);t.b=r,t.a=o;var g=m.a.bind()("store"),E=f.a.bind()(s.a.bind()("tapclock.online"),["templates","sessions","events"]),P=y.applyMiddleware(a.a,v.createMiddleware(E))(y.createStore)},315:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=n(1),a=u&&u.__esModule?function(){return u["default"]}:function(){return u};Object.defineProperty(a,"a",{get:a});var c=n(25),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){return a.a.createElement(c.a,null,a.a.createElement("h1",null,"Tap Clock"),this.props.children)}}]),t}(u.Component);l.propTypes={route:u.PropTypes.object.isRequired},l.contextTypes={router:a.a.PropTypes.object.isRequired},t.a=l},316:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=n(1),a=u&&u.__esModule?function(){return u["default"]}:function(){return u};Object.defineProperty(a,"a",{get:a});var c=n(8),s=c&&c.__esModule?function(){return c["default"]}:function(){return c};Object.defineProperty(s,"a",{get:s});var l=n(13),f=n(317),p=n(14),d=n(25),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b=(l.a.bind()("EventClock"),function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),y(t,[{key:"hasTerminated",value:function(){return this.props.currentEvent.isEnd}},{key:"createEventButton",value:function(e){var t=e.eventCreator(this.props.session._id);return a.a.createElement("button",{onClick:this.props.createEvent.bind(this,t),disabled:this.props.currentEvent.name===name||this.hasTerminated()},e.name)}},{key:"endEventsButton",value:function(){return a.a.createElement("button",{onClick:this.props.endEvents.bind(this,this.props.session._id),disabled:this.hasTerminated()},"stop")}},{key:"render",value:function(){var e=this;return a.a.createElement("div",null,a.a.createElement(d.b,null,this.props.templates.toIndexedSeq().map(function(t){return a.a.createElement(d.c,{key:t._id},e.createEventButton(t))}),a.a.createElement(d.c,null,this.endEventsButton())),a.a.createElement(f.a,{events:this.props.events,deleteEvent:this.props.deleteEvent,hasTerminated:this.hasTerminated()}))}}]),t}(u.Component));b.propTypes={session:u.PropTypes.instanceOf(p.a).isRequired,events:u.PropTypes.instanceOf(c.OrderedMap).isRequired,templates:u.PropTypes.instanceOf(c.Map).isRequired,currentEvent:u.PropTypes.instanceOf(p.c).isRequired,createEvent:u.PropTypes.func.isRequired,deleteEvent:u.PropTypes.func.isRequired,endEvents:u.PropTypes.func.isRequired},t.a=b},317:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=n(1),a=u&&u.__esModule?function(){return u["default"]}:function(){return u};Object.defineProperty(a,"a",{get:a});var c=n(8),s=c&&c.__esModule?function(){return c["default"]}:function(){return c};Object.defineProperty(s,"a",{get:s});var l=n(319),f=n(318),p=n(14),d=n(25),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),y(t,[{key:"render",value:function(){var e=this,t=this.props.events,n=this.props.events.keySeq(),r=this.props.hasTerminated?t.last():new p.d;return a.a.createElement("div",null,n.map(function(n,o,i){return a.a.createElement(d.b,{key:n},a.a.createElement(d.c,null,a.a.createElement(l.a,{event:t.get(n),deleteEvent:e.props.deleteEvent,hasTerminated:e.props.hasTerminated},a.a.createElement(f.a,{start:t.get(n),end:t.get(i.get(o+1),r)}))))}))}}]),t}(u.Component);b.propTypes={events:u.PropTypes.instanceOf(c.OrderedMap).isRequired,deleteEvent:u.PropTypes.func.isRequired,hasTerminated:u.PropTypes.bool.isRequired},t.a=b},318:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return 1e3*Math.round(e/1e3)}var a=n(0),c=a&&a.__esModule?function(){return a["default"]}:function(){return a};Object.defineProperty(c,"a",{get:c});var s=n(1),l=s&&s.__esModule?function(){return s["default"]}:function(){return s};Object.defineProperty(l,"a",{get:l});var f=n(14),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(e){function t(e){r(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={duration:u(e.end.time.diff(e.start.time))},n}return i(t,e),p(t,[{key:"componentWillMount",value:function(){this.intervals=[]}},{key:"componentDidMount",value:function(){this.props.end.isNow&&this.intervals.push(setInterval(this.updateDuration.bind(this),1e3))}},{key:"componentWillReceiveProps",value:function(e){e.end.isNow||this.intervals.forEach(clearInterval)}},{key:"componentWillUnmount",value:function(){this.intervals.forEach(clearInterval)}},{key:"updateDuration",value:function(){var e=u(c.a.bind()().diff(this.props.start.time));this.setState({duration:e})}},{key:"timeDelta",value:function(e,t){var n=new Date(Math.abs(e-t));return n.getUTCHours()+":"+n.getUTCMinutes()+":"+n.getUTCSeconds()}},{key:"render",value:function(){return l.a.createElement("span",null,"time: ",c.a.bind()(this.state.duration).utc().format("HH:mm:ss"))}}]),t}(s.Component);d.propTypes={start:s.PropTypes.instanceOf(f.c).isRequired,end:s.PropTypes.instanceOf(f.c).isRequired},t.a=d},319:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=n(1),a=u&&u.__esModule?function(){return u["default"]}:function(){return u};Object.defineProperty(a,"a",{get:a});var c=n(14),s=n(25),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),l(t,[{key:"deleteEvent",value:function(){this.props.deleteEvent(this.props.event._id)}},{key:"render",value:function(){return this.props.event.isEnd?null:a.a.createElement("div",null,a.a.createElement(s.b,null,a.a.createElement(s.c,null,this.props.event.name),a.a.createElement(s.c,null,"start: ",this.props.event.time.calendar()),a.a.createElement(s.c,null,this.props.children),a.a.createElement(s.c,null,a.a.createElement("button",{onClick:this.deleteEvent.bind(this),disabled:this.props.hasTerminated},"delete"))))}}]),t}(u.Component);f.propTypes={event:u.PropTypes.instanceOf(c.c).isRequired,deleteEvent:u.PropTypes.func.isRequired,hasTerminated:u.PropTypes.bool.isRequired},t.a=f},320:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=n(1),a=u&&u.__esModule?function(){return u["default"]}:function(){return u};Object.defineProperty(a,"a",{get:a});var c=n(51),s=c&&c.__esModule?function(){return c["default"]}:function(){return c};Object.defineProperty(s,"a",{get:s});var l=n(374),f=l&&l.__esModule?function(){return l["default"]}:function(){return l};Object.defineProperty(f,"a",{get:f});var p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),p(t,[{key:"render",value:function(){return a.a.createElement("div",{styleName:"cell"},this.props.children)}}]),t}(u.Component);t.a=s.a.bind()(d,f.a)},321:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=n(1),a=u&&u.__esModule?function(){return u["default"]}:function(){return u};Object.defineProperty(a,"a",{get:a});var c=n(51),s=c&&c.__esModule?function(){return c["default"]}:function(){return c};Object.defineProperty(s,"a",{get:s});var l=n(375),f=l&&l.__esModule?function(){return l["default"]}:function(){return l};Object.defineProperty(f,"a",{get:f});var p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),p(t,[{key:"render",value:function(){return a.a.createElement("div",{styleName:"container"},this.props.children)}}]),t}(u.Component);t.a=s.a.bind()(d,f.a)},322:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=n(1),a=u&&u.__esModule?function(){return u["default"]}:function(){return u};Object.defineProperty(a,"a",{get:a});var c=n(51),s=c&&c.__esModule?function(){return c["default"]}:function(){return c};Object.defineProperty(s,"a",{get:s});var l=n(376),f=l&&l.__esModule?function(){return l["default"]}:function(){return l};Object.defineProperty(f,"a",{get:f});var p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),p(t,[{key:"render",value:function(){return a.a.createElement("div",{styleName:"row"},this.props.children)}}]),t}(u.Component);t.a=s.a.bind()(d,f.a)},323:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return{templates:e.get("templates")}}var a=n(1),c=a&&a.__esModule?function(){return a["default"]}:function(){return a};Object.defineProperty(c,"a",{get:c});var s=n(43),l=s&&s.__esModule?function(){return s["default"]}:function(){return s};Object.defineProperty(l,"a",{get:l});var f=n(42),p=f&&f.__esModule?function(){return f["default"]}:function(){return f};Object.defineProperty(p,"a",{get:p});var d=n(8),y=d&&d.__esModule?function(){return d["default"]}:function(){return d};Object.defineProperty(y,"a",{get:y});var b=n(13),v=n(25),h=n(120),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_=(b.a.bind()("PreferencesView"),function(e){function t(e){r(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={templateName:""},n}return i(t,e),m(t,[{key:"onTemplateNameChanged",value:function(e){this.setState({templateName:e.target.value})}},{key:"onCreateTemplate",value:function(e){this.setState({templateName:""}),this.props.createTemplate(e)}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement(v.b,null,c.a.createElement(v.c,null,c.a.createElement("h1",null,"Preferences"))),this.props.templates.toIndexedSeq().map(function(t){return c.a.createElement(v.b,{key:t._id},c.a.createElement(v.c,null,t.name),c.a.createElement(v.c,null,c.a.createElement("button",{onClick:e.props.deleteTemplate.bind(e,t._id)},"delete")))}),c.a.createElement(v.b,null,c.a.createElement(v.c,null,c.a.createElement("input",{type:"text",value:this.state.templateName,onChange:this.onTemplateNameChanged.bind(this)}),c.a.createElement("button",{disabled:!this.state.templateName,onClick:this.onCreateTemplate.bind(this,this.state.templateName)},"create event template")),c.a.createElement(v.c,null,c.a.createElement(s.IndexLink,{to:"/"},"back"))))}}]),t}(a.Component));_.propTypes={templates:a.PropTypes.instanceOf(d.Map).isRequired,createTemplate:a.PropTypes.func.isRequired,deleteTemplate:a.PropTypes.func.isRequired},t.a=_,t.a=f.connect.bind()(u,{createTemplate:h.a,deleteTemplate:h.b})(_)},324:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return{templates:e.get("templates"),sessions:e.get("sessions"),events:e.get("events")}}var a=n(1),c=a&&a.__esModule?function(){return a["default"]}:function(){return a};Object.defineProperty(c,"a",{get:c});var s=n(43),l=s&&s.__esModule?function(){return s["default"]}:function(){return s};Object.defineProperty(l,"a",{get:l});var f=n(42),p=f&&f.__esModule?function(){return f["default"]}:function(){return f};Object.defineProperty(p,"a",{get:p});var d=n(8),y=d&&d.__esModule?function(){return d["default"]}:function(){return d};Object.defineProperty(y,"a",{get:y});var b=n(13),v=n(331),h=n(316),m=n(14),_=n(25),O=n(119),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),E=(b.a.bind()("SessionDetail"),function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),g(t,[{key:"componentWillMount",value:function(){this.setSession(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.setSession(e)}},{key:"setSession",value:function(e){var t=e.sessions.get(e.routeParams.id),n=e.events.filter(function(e){return e.session_id===t._id}).sortBy(function(e){return e.time});this.setState({session:t,events:n,currentEvent:n.last()||new m.f})}},{key:"hasTerminated",value:function(){return this.state.currentEvent.isEnd}},{key:"sessionReport",value:function(){var e=new v.a(this.state.session,this.state.events);return c.a.createElement(_.b,null,c.a.createElement(_.c,null,c.a.createElement("b",null,"total:")," ",e.totalTime),this.props.templates.toIndexedSeq().map(function(t){return c.a.createElement(_.c,{key:t._id},c.a.createElement("b",null,t.name,":")," ",e.getCumulatedTime(t.custom_type))}))}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(_.b,null,c.a.createElement(_.c,null,c.a.createElement("h1",null,this.state.session.name),c.a.createElement(h.a,{createEvent:this.props.createEvent,deleteEvent:this.props.deleteEvent,endEvents:this.props.endEvents,templates:this.props.templates,session:this.state.session,events:this.state.events,currentEvent:this.state.currentEvent}))),this.hasTerminated()?this.sessionReport():null,c.a.createElement(_.b,null,c.a.createElement(_.c,null,c.a.createElement(s.IndexLink,{to:"/"},"back"))))}}]),t}(a.Component));E.propTypes={routeParams:a.PropTypes.object.isRequired,templates:a.PropTypes.instanceOf(d.Map).isRequired,sessions:a.PropTypes.instanceOf(d.Map).isRequired,events:a.PropTypes.instanceOf(d.Map).isRequired,createEvent:a.PropTypes.func.isRequired,deleteEvent:a.PropTypes.func.isRequired,endEvents:a.PropTypes.func.isRequired},t.a=E,t.a=f.connect.bind()(u,{createEvent:O.a,deleteEvent:O.b,endEvents:O.c})(E)},325:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,
configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return{sessions:e.get("sessions"),events:e.get("events")}}var a=n(1),c=a&&a.__esModule?function(){return a["default"]}:function(){return a};Object.defineProperty(c,"a",{get:c});var s=n(43),l=s&&s.__esModule?function(){return s["default"]}:function(){return s};Object.defineProperty(l,"a",{get:l});var f=n(42),p=f&&f.__esModule?function(){return f["default"]}:function(){return f};Object.defineProperty(p,"a",{get:p});var d=n(8),y=d&&d.__esModule?function(){return d["default"]}:function(){return d};Object.defineProperty(y,"a",{get:y});var b=n(25),v=n(76),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),h(t,[{key:"addSession",value:function(){this.props.createSession("Session "+Date.now())}},{key:"deleteSession",value:function(e){this.props.deleteSession(e)}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement(b.b,null,c.a.createElement(b.c,null,this.props.sessions.valueSeq().map(function(t){return c.a.createElement(b.b,{key:t._id},c.a.createElement(b.c,null,c.a.createElement(s.Link,{to:"/session/"+t._id},t.name)),c.a.createElement(b.c,null,c.a.createElement("button",{onClick:e.deleteSession.bind(e,t._id)},"delete")))}))),c.a.createElement(b.b,null,c.a.createElement(b.c,null,c.a.createElement("button",{onClick:this.addSession.bind(this)},"add session")),c.a.createElement(b.c,null,c.a.createElement(s.Link,{to:"/preferences"},"Preferences"))))}}]),t}(a.Component);m.propTypes={sessions:a.PropTypes.instanceOf(d.Map).isRequired,events:a.PropTypes.instanceOf(d.Map).isRequired,createSession:a.PropTypes.func.isRequired,deleteSession:a.PropTypes.func.isRequired},t.a=m,t.a=f.connect.bind()(u,{createSession:v.a,deleteSession:v.b})(m)},326:function(e,t,n){"use strict";var r=n(1),o=r&&r.__esModule?function(){return r["default"]}:function(){return r};Object.defineProperty(o,"a",{get:o});var i=n(75),u=i&&i.__esModule?function(){return i["default"]}:function(){return i};Object.defineProperty(u,"a",{get:u});var a=n(13),c=n(313),s=n(314),l=(a.a.bind()("index"),s.a.bind()()||void 0),f=s.b.bind()(l),p=document.getElementById("main");u.a.render(o.a.createElement(c.a,{store:f}),p)},327:function(e,t,n){"use strict";function r(){var e=arguments.length<=0||void 0===arguments[0]?o.Map.bind()():arguments[0],t=arguments[1];switch(t.type){case u.d:return e.set(t.payload.get("_id"),t.payload);case u.e:return e["delete"](t.payload);case a.d:return e.filter(function(e){return e.session_id!==t.payload});default:return e}}var o=n(8),i=o&&o.__esModule?function(){return o["default"]}:function(){return o};Object.defineProperty(i,"a",{get:i});var u=n(119),a=n(76);t.a=r},328:function(e,t,n){"use strict";var r=n(114),o=r&&r.__esModule?function(){return r["default"]}:function(){return r};Object.defineProperty(o,"a",{get:o});var i=n(330),u=n(329),a=n(327),c=r.combineReducers.bind()({templates:i.a,sessions:u.a,events:a.a});t.a=c},329:function(e,t,n){"use strict";function r(){var e=arguments.length<=0||void 0===arguments[0]?o.Map.bind()():arguments[0],t=arguments[1];switch(t.type){case u.c:return e.set(t.payload.get("_id"),t.payload);case u.d:return e["delete"](t.payload);default:return e}}var o=n(8),i=o&&o.__esModule?function(){return o["default"]}:function(){return o};Object.defineProperty(i,"a",{get:i});var u=n(76);t.a=r},330:function(e,t,n){"use strict";function r(){var e=arguments.length<=0||void 0===arguments[0]?o.g:arguments[0],t=arguments[1];switch(t.type){case i.c:return e.set(t.payload.get("_id"),t.payload);case i.d:return e["delete"](t.payload);default:return e}}var o=n(14),i=n(120);t.a=r},331:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return 1e3*Math.round(e/1e3)}var i=n(0),u=i&&i.__esModule?function(){return i["default"]}:function(){return i};Object.defineProperty(u,"a",{get:u});var a=n(8),c=a&&a.__esModule?function(){return a["default"]}:function(){return a};Object.defineProperty(c,"a",{get:c});var s=n(13),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=(s.a.bind()("report"),function(){function e(t,n){r(this,e),this.session=t,this.events=n.sortBy(function(e){return e.time}).toIndexedSeq()}return l(e,[{key:"getCumulatedTime",value:function(){var e=this,t=a.Set.of.apply(a.Set,arguments),n=function(n){var r=e.events.findKey(function(e){return e._id===n._id});return e.events.slice(r).find(function(e){return!t.includes(e.custom_type)},e.events.last()).get("time")},r=this.events.filter(function(e){return t.includes(e.custom_type)}).reduce(function(e,t){var r=n(t),o=r.diff(t.time);return e+o},0);return u.a.bind()(o(r)).utc().format("HH:mm:ss")}},{key:"eventTypes",get:function(){return this.events.map(function(e){return e.type}).toSet()}},{key:"totalTime",get:function(){var e=this.events.first().get("time"),t=this.events.last().get("time"),n=t.diff(e);return u.a.bind()(o(n)).utc().format("HH:mm:ss")}}]),e}());t.a=f},374:function(e,t){e.exports={cell:"cell__cell___yD6IW"}},375:function(e,t){e.exports={container:"container__container___36SI2"}},376:function(e,t){e.exports={row:"row__row___3ayQd"}},76:function(e,t,n){"use strict";function r(e){return s('create session "%s"',e),function(t){t(p(new c.a({_id:u.a.v4(),name:e})))}}function o(e){return s("delete session %s",e),function(t){t(d(e))}}var i=n(74),u=i&&i.__esModule?function(){return i["default"]}:function(){return i};Object.defineProperty(u,"a",{get:u});var a=n(13),c=n(14);t.a=r,t.b=o;var s=a.a.bind()("actions:sessions"),l=Symbol("create session");Object.defineProperty(t,"c",{configurable:!1,enumerable:!0,get:function(){return l}});var f=Symbol("delete session");Object.defineProperty(t,"d",{configurable:!1,enumerable:!0,get:function(){return f}});var p=function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];return{type:l,payload:e}},d=function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];return{type:f,payload:e}}}},[326]);
//# sourceMappingURL=index.min.js.map